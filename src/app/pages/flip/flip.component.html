<!-- eslint-disable @angular-eslint/template/interactive-supports-focus -->
<!-- eslint-disable @angular-eslint/template/click-events-have-key-events -->
<ng-container *ngIf="{ items: rowData$ | async } as data">
  <div class="dropdown">
    <button
      class="btn btn-secondary dropdown-toggle"
      type="button"
      id="flipTableDropdownBtn"
      data-toggle="dropdown"
      aria-haspopup="true"
      aria-expanded="false"
    >
      {{
        this.dropdownTextOptions[this.selectedIndex]?.display ??
          "Select Item Category"
      }}
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <a class="dropdown-item" (click)="togglePrices(0)">{{
        dropdownTextOptions[0].display
      }}</a>
      <a class="dropdown-item" (click)="togglePrices(1)">{{
        dropdownTextOptions[1].display
      }}</a>
      <a class="dropdown-item" (click)="togglePrices(2)">{{
        dropdownTextOptions[2].display
      }}</a>
      <a class="dropdown-item" (click)="togglePrices(3)">{{
        dropdownTextOptions[3].display
      }}</a>
    </div>
  </div>

   <table mat-table [dataSource]="dataSource" matSort>
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Item</th>
      <td mat-cell *matCellDef="let row">{{ row.name }}</td>
    </ng-container>
    <ng-container matColumnDef="roiNq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>ROI (NQ)</th>
      <td mat-cell *matCellDef="let row">{{ format(emptyIfInvalid(row.roiNq)) }}</td>
    </ng-container>
    <ng-container matColumnDef="minPriceNq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Min Price (NQ)</th>
      <td mat-cell *matCellDef="let row">{{ row.minPriceNq }}</td>
    </ng-container>
    <ng-container matColumnDef="homePriceNq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Home Price (NQ)</th>
      <td mat-cell *matCellDef="let row">{{ row.homePriceNq }}</td>
    </ng-container>
    <ng-container matColumnDef="worldNq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Min Price World (NQ)</th>
      <td mat-cell *matCellDef="let row">{{ row.worldNq }}</td>
    </ng-container>
    <ng-container matColumnDef="velocityNq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Velocity (NQ)</th>
      <td mat-cell *matCellDef="let row">{{ format(emptyIfInvalid(row.velocityNq)) }}</td>
    </ng-container>
    <ng-container matColumnDef="roiHq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>ROI (HQ)</th>
      <td mat-cell *matCellDef="let row">{{ format(emptyIfInvalid(row.roiHq)) }}</td>
    </ng-container>
    <ng-container matColumnDef="minPriceHq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Min Price (HQ)</th>
      <td mat-cell *matCellDef="let row">{{ row.minPriceHq }}</td>
    </ng-container>
    <ng-container matColumnDef="homePriceHq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Home Price (HQ)</th>
      <td mat-cell *matCellDef="let row">{{ row.homePriceHq }}</td>
    </ng-container>
    <ng-container matColumnDef="worldHq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Min Price World (HQ)</th>
      <td mat-cell *matCellDef="let row">{{ row.worldHq }}</td>
    </ng-container>
    <ng-container matColumnDef="velocityHq">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Velocity (HQ)</th>
      <td mat-cell *matCellDef="let row">{{ format(emptyIfInvalid(row.velocityHq)) }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="headers"></tr>
    <tr mat-row *matRowDef="let row; columns: headers;"></tr>
  </table>
</ng-container>
